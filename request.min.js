!function(e){function n(e){e.obj[e.method]?e.obj[e.method](e.event,e.handler,!1):e.obj[e.fallback]&&e.obj[e.fallback]("on"+e.event,e.handler)}var r=function(e,n){var r=[].forEach;return e?void(e instanceof Array||"length"in e?r?r.call(e,n):function(){for(var r=0;r<e.length;r++)n(e[r],r,e)}():!function(){for(var r in e)e.hasOwnProperty(r)&&n(e[r],r,e)}()):[]},t=function(e,n){var t=[];return r(e,function(e,r,o){t.push(n(e,r,o))}),t},o=e.request=function(n,o){function a(e,n){var r=new Error(e);r.original=n,o(r,void 0,c)}function i(){4===c.readyState&&c.status>=200&&c.status<300?o(void 0,c.responseText,c):4===c.readyState&&0!==c.status&&(12152===c.status?a("unknown ajax error",c):c.status>1e4?a("unknown IE error",c):a("HTTP error "+c.status,c))}function s(e){a("unknown ajax error",e)}if("string"==typeof n)n={url:n};else{if(!n||"object"!=typeof n)return void o(new Error(n+" is not a valid request object."));if("string"!=typeof n.url)return void o(new Error(n.url+" is not a valid string url."))}n=n||{},n.url=n.url||"#",n.method=(n.method||"GET").toUpperCase(),n.async=n.async||!0,n.body=n.body||n.data||null,n.contentType="plain"===n.dataType?"text/plain":"application/x-www-form-urlencoded";var c=e.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");c.onreadystatechange=i,c.onerror=s,c.open(n.method,n.url,n.async);var u=!1;if(n.headers&&r(n.headers,function(e,n){c.setRequestHeader(n,e),u=u||"content-type"===n.toLowerCase()}),"POST"===n.method){u||c.setRequestHeader("Content-Type",n.contentType);var d="";switch(typeof n.body){case"object":d=t(n.body,function(e,n){return encodeURIComponent(n)+"="+encodeURIComponent(e)}).join("&");break;case"string":d=n.body;break;default:d=n.body.toString()}c.send(d)}else c.send();return c};o.json=function(e,n){o(e,function(e,r,t){if(e)n(e,r,t);else{var a,i;try{i=o.parseJSON(r)}catch(s){a=new Error("invalid JSON"),a.original=s}n(a,i,t)}})},o.jsonp=function(n,r){var t=document.createElement("script"),a="tinyrequest_"+Date.now()+"_"+Math.random().toString().split(".").pop();n.unknownErrors=!!n.unknownErrors,t.src=n.url.match(/\?/)?n.url+"&callback="+a:n.url+"?callback="+a,t.async=!1;var i=function(){t.parentNode.removeChild(t),o.removeEvent(e,"error",s)};t.onerror=function(e){r(e),i()},e[a]=function(e){r(void 0,e),i()};var s=function(o,a){var s=function(){var e=new Error("jsonp scripting error");e.original=o,r(e),i()};o.filename===t.src?s():a===t.src?s():e.event&&e.event.errorUrl===t.src?(e.event=void 0,s()):n.unknownErrors&&o.target===e&&""===o.filename&&"Script error."===o.message?s():n.unknownErrors&&o.target===e&&!o.filename?s():o.filename&&o.filename!==t.src||i()};o.addEvent(e,"error",s);var c=document.getElementsByTagName("head")[0];c.appendChild(t)},o.parseJSON=function(n){return e.JSON&&e.JSON.parse?JSON.parse(n):/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))?new Function("return "+n)():void 0},o.addEvent=function(e,r,t){n({obj:e,method:"addEventListener",fallback:"attachEvent",event:r,handler:t})},o.removeEvent=function(e,r,t){n({obj:e,method:"removeEventListener",fallback:"detachEvent",event:r,handler:t})}}(window);