!function(e){var n=function(e,n){var r=[].forEach;return e?void(e instanceof Array||"length"in e?r?r.call(e,n):function(){for(var r=0;r<e.length;r++)n(e[r],r,e)}():function(){for(var r in e)e.hasOwnProperty(r)&&n(e[r],r,e)}()):[]},r=function(e,r){var t=[];return n(e,function(e,n,o){t.push(r(e,n,o))}),t},t=e.request=function(t,o){function a(e,n){var r=new Error(e);r.original=n,o(r,void 0,i)}if("string"==typeof t)t={url:t};else{if(!t||"object"!=typeof t)return void o(new Error(t+" is not a valid request object."));if("string"!=typeof t.url)return void o(new Error(t.url+" is not a valid string url."))}t=t||{},t.url=t.url||"#",t.method=(t.method||"GET").toUpperCase(),t.async=t.async||!0,t.body=t.body||t.data||null,t.contentType="plain"===t.dataType?"text/plain":"application/x-www-form-urlencoded";var i=e.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");i.onreadystatechange=function(){4===i.readyState&&i.status>=200&&i.status<300?o(void 0,i.responseText,i):4===i.readyState&&0!==i.status&&(12152===i.status?a("unknown ajax error",i):i.status>1e4?a("unknown IE error",i):a("HTTP error "+i.status,i))},i.open(t.method,t.url,t.async),i.onerror=function(e){a("unknown ajax error",e)};var s=!1;if(t.headers&&n(t.headers,function(e,n){i.setRequestHeader(n,e),s=s||"content-type"===n.toLowerCase()}),"POST"===t.method){s||i.setRequestHeader("Content-Type",t.contentType);var c="";switch(typeof t.body){case"object":c=r(t.body,function(e,n){return encodeURIComponent(n)+"="+encodeURIComponent(e)}).join("&");break;case"string":c=t.body;break;default:c=t.body.toString()}i.send(c)}else i.send();return i};t.json=function(e,n){t(e,function(e,r,o){if(e)n(e,r,o);else{var a,i;try{i=t.parseJSON(r)}catch(s){a=new Error("invalid JSON"),a.original=s}n(a,i,o)}})},t.jsonp=function(n,r){var o=document.createElement("script"),a="tinyrequest_"+Date.now()+"_"+Math.random().toString().split(".").pop();n.unknownErrors=!!n.unknownErrors,o.src=n.url.match(/\?/)?n.url+"&callback="+a:n.url+"?callback="+a,o.async=!1;var i=function(){o.parentNode.removeChild(o),t.removeEvent(e,"error",s)};o.onerror=function(e){r(e),i()},e[a]=function(e){r(void 0,e),i()};var s=function(t,a){var s=function(){var e=new Error("jsonp scripting error");e.original=t,r(e),i()};t.filename===o.src?s():a===o.src?s():e.event&&e.event.errorUrl===o.src?(e.event=void 0,s()):n.unknownErrors&&t.target==e&&""===t.filename&&"Script error."===t.message?s():n.unknownErrors&&t.target===e&&!t.filename?s():t.filename&&t.filename!==o.src||i()};t.addEvent(e,"error",s);var c=document.getElementsByTagName("head")[0];c.appendChild(o)},t.parseJSON=function(n){return e.JSON&&e.JSON.parse?JSON.parse(n):/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))?new Function("return "+n)():void 0},t.addEvent=function(e,n,r){e.addEventListener?e.addEventListener(n,r,!1):e.attachEvent&&e.attachEvent("on"+n,r)},t.removeEvent=function(e,n,r){e.removeEventListener?e.removeEventListener(n,r,!1):e.detachEvent&&e.detachEvent("on"+n,r)}}(window);