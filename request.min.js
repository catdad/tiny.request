!function(e){var n=function(e,n){var r=[].forEach;return e?void(e instanceof Array||"length"in e?r?r.call(e,n):function(){for(var r=0;r<e.length;r++)n(e[r],r,e)}():function(){for(var r in e)e.hasOwnProperty(r)&&n(e[r],r,e)}()):[]},r=function(e,r){var t=[];return n(e,function(e,n,o){t.push(r(e,n,o))}),t},t=e.request=function(t,o){function a(e,n){var r=new Error(e);r.original=n,o(r,void 0,s)}t=t||{},t.url=t.url||"#",t.method=(t.method||"GET").toUpperCase(),t.async=t.async||!0,t.body=t.body||t.data||null;var s=e.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");s.onreadystatechange=function(){4===s.readyState&&200===s.status?o(null,s.responseText,s):4===s.readyState&&0!==s.status&&(12152===s.status?a("unknown ajax error",s):s.status>1e4?a("unknown IE error",s):a("HTTP error "+s.status,s))},s.open(t.method,t.url,t.async),s.onerror=function(e){a("unknown ajax error",e)};var c=!1;if(t.headers&&n(t.headers,function(e,n){s.setRequestHeader(n,e),"content-type"===n.toLowerCase()&&(c=!0)}),"POST"===t.method){c||s.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var u="";switch(typeof t.body){case"object":u=r(t.body,function(e,n){return encodeURIComponent(n)+"="+encodeURIComponent(e)}).join("&");break;case"string":u=t.body;break;default:u=t.body.toString()}s.send(u)}else s.send();return s};t.json=function(e,n){t(e,function(e,r,o){if(e)n(e,r,o);else try{var a=t.parseJSON(r);n(null,a,o)}catch(s){var e=new Error("invalid JSON");e.original=s,n(e,void 0,o)}})},t.jsonp=function(n,r){var o=document.createElement("script"),a="tinyrequest_"+Date.now()+"_"+Math.random().toString().split(".").pop();n.unknownErrors=!!n.unknownErrors,o.src=n.url.match(/\?/)?n.url+"&callback="+a:n.url+"?callback="+a,o.async=!1;var s=function(){o.parentNode.removeChild(o),t.removeEvent(e,"error",c)};o.onerror=function(e){r(e),s()},e[a]=function(e){r(null,e),s()};var c=function(t,a){var c=function(){var e=new Error("jsonp scripting error");e.original=t,r(e),s()};t.filename===o.src?c():a===o.src?c():e.event&&e.event.errorUrl===o.src?(e.event=null,c()):n.unknownErrors&&t.target==e&&""===t.filename&&"Script error."===t.message?c():n.unknownErrors&&t.target===e&&!t.filename?c():t.filename&&t.filename!==o.src||s()};t.addEvent(e,"error",c);var u=document.getElementsByTagName("head")[0];u.appendChild(o)},t.parseJSON=function(n){return e.JSON&&e.JSON.parse?JSON.parse(n):/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))?new Function("return "+n)():null},t.addEvent=function(e,n,r){e.addEventListener?e.addEventListener(n,r,!1):e.attachEvent&&e.attachEvent("on"+n,r)},t.removeEvent=function(e,n,r){e.removeEventListener?e.removeEventListener(n,r,!1):e.detachEvent&&e.detachEvent("on"+n,r)}}(window);